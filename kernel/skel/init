#!/bin/sh

/bin/busybox --install -s /bin

mount -t devtmpfs /dev /dev
#Mount fstab - /proc /sys /tmp
mount -a

mkdir -p /dev/pts /tmp/var/run /tmp/var/log /tmp/var/lock

mount -t devpts /dev/pts /dev/pts

#Run 3 times, because new devices found after initial module load
/etc/init.d/rcS-detect_kmods 2> /dev/null
sleep 1
/etc/init.d/rcS-detect_kmods 2> /dev/null
sleep 1
/etc/init.d/rcS-detect_kmods 2> /dev/null

exec /bin/init <dev/console >dev/console 2>&1
